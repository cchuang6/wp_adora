!function(e){var t=function(a){var l=e(".element-template-list");if(l.html(""),!VCElementTemplateData||!VCElementTemplateData[a]||!e.isPlainObject(VCElementTemplateData[a]))return void l.html('<li class="empty">empty</li>');var n=VCElementTemplateData[a];e.each(n,function(n,i){$li=e("<li><a>"+n+'</a><i class="remove"></i></li>'),$li.click(function(){var t=e(".vc_shortcode-edit-form");e.each(i,function(a,l){var n=t.find('[name="'+a+'"]'),i=n.attr("type");if("css"!=a&&!n.hasClass("vc_alpha-field"))if("radio"==i);else if("checkbox"==i){var c=n.prop("checked"),s="true"==l&&"false"!=l?!0:!1;n.prop("checked",s),c!=s&&"simply"!=a&&n.trigger("change")}else if(n.hasClass("gallery_widget_attached_images_ids")){var o=l.toString().split(","),r=n.closest(".edit_form_line").find(".gallery_widget_attached_images_list");r.html(""),n.val(l),e.each(o,function(t,a){if(a){var l=e(_.template(e("#vc_settings-image-block").html(),{id:a,url:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs="}));r.append(l),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:a},dataType:"html",context:this}).done(function(e){l.find("img").prop("src",e)})}})}else if(n.hasClass("vc_color-control")){n.val(l).trigger("change");try{n.iris("color",l)}catch(p){}if(l||""!=l||n.closest(".vc_color-picker").find(".wp-color-result").css("backgroundColor",""),l.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)){var m=100*parseFloat(l.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]);$alpha=n.closest(".vc_color-picker").find(".vc_alpha-field"),$alpha_output=n.closest(".vc_color-picker").find(".rangevalue"),$alpha.val(m),$alpha_output.val(m+"%")}}else if("wpb_tinymce_content"==a&&tinymce){var d=tinymce.get("wpb_tinymce_content");d.setContent(l)}else n.val(l).trigger("change")})}),$li.find("i").click(function(l){l.preventDefault(),l.stopPropagation(),confirm("Do you really wanna delete?")&&e.ajax({type:"POST",url:VCElementTemplateSettings.ajaxurl,data:{action:"vc_et_remove_template",element:a,name:n,nonce:VCElementTemplateSettings.nonce},dataType:"json",success:function(l){l.success&&l.data&&e.isPlainObject(l.data)&&(VCElementTemplateData=l.data,t(a))},error:function(){}})}),l.append($li)})};window.VCElementTemplateLoad=function(){var a=window.vc.active_panel.model.get("shortcode");t(a),e(".element-template-add").off("save-template").on("save-template",function(l,n,i){e.ajax({type:"POST",url:VCElementTemplateSettings.ajaxurl,data:{action:"vc_et_save_template",element:a,name:n,values:i,nonce:VCElementTemplateSettings.nonce},dataType:"json",success:function(l){l.success&&l.data&&e.isPlainObject(l.data)&&(VCElementTemplateData=l.data,t(a))},error:function(){}})})},e(function(){e("#vc_properties-panel").each(function(){var t=e(this),a=e(".vc_panel-footer",this);a.append('<div class="element-template-container"><button type="button" class="vc_btn vc_btn-default element-template-button">Element Template <i class="up"></i></button><ul><li class="element-template-add"><a>Save current...</a></li><li class="divider"></li><span class="element-template-list"></span></ul></div>'),a.find(".element-template-add").on("click",function(){$fields=t.find(".wpb_vc_param_value");var a={};$fields.each(function(){var t,l=e(this),n=l.attr("name"),i=l.attr("type");t="checkbox"==i?l.is(":checked"):l.val(),a[n]=t});var l=prompt("Enter name of template: ","");l&&e(this).trigger("save-template",[l,a])})})})}(jQuery);